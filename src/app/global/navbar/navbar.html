<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo (Right) -->
    <div class="logo">
      <a routerLink="/">
        <img src="logo-color.png" alt="Logo">
      </a>
    </div>

    <!-- Navigation Menu (Center) -->
    <ul class="nav-menu desktop-menu">
      <!-- Welcome Item (Always styled as pill when active) -->
      <li class="nav-item">
        <a [routerLink]="['/']" fragment="hero" routerLinkActive="active" [routerLinkActiveOptions]="{ paths: 'exact', queryParams: 'exact', fragment: 'exact', matrixParams: 'ignored' }" class="nav-link">
          {{ langService.translate('nav.welcome') }}
        </a>
      </li>

      @for (item of navItems(); track item.label) {
        <li class="nav-item">
          <a [routerLink]="[item.path]" [fragment]="item.fragment" routerLinkActive="active" [routerLinkActiveOptions]="{ paths: 'exact', queryParams: 'exact', fragment: 'exact', matrixParams: 'ignored' }" class="nav-link" [ngStyle]="item.styles">
            {{ item.label }}
          </a>
        </li>
      }
    </ul>

    <!-- Left Actions (CTA + Burger + Lang) -->
    <div class="left-actions">
      <!-- Lang Switcher -->
      <button class="lang-toggle" (click)="toggleLanguage()">
        {{ langService.currentLang() === 'ar' ? 'English' : 'عربي' }}
      </button>

      <!-- CTA Button (Left) -->
      <a routerLink="/start-project" class="cta-button">
        <!-- Decor Left (Visual Left, Physical Left) -->
        <div class="deco-icon deco-left"></div>
        
        <span class="cta-text">{{ langService.translate('nav.cta') }}</span>
        
        <!-- Decor Right (Visual Right, Physical Right of the container?) -->
        <div class="deco-icon deco-right"></div>
      </a>

      <!-- Burger Menu -->
      <button class="burger-menu" (click)="toggleMenu()" aria-label="Toggle menu">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>

  <!-- Bottom Sheet Overlay -->
  <div class="bottom-sheet-overlay" [class.open]="isMenuOpen()" (click)="toggleMenu()"></div>

  <!-- Bottom Sheet -->
  <div class="bottom-sheet" [class.open]="isMenuOpen()">
    <!-- Floating Close Button -->
    <div class="close-btn-floating" (click)="toggleMenu()">
       <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
         <line x1="18" y1="6" x2="6" y2="18"></line>
         <line x1="6" y1="6" x2="18" y2="18"></line>
       </svg>
    </div>

    <ul class="mobile-nav-menu">
      <li class="nav-item">
        <a [routerLink]="['/']" fragment="hero" routerLinkActive="active" [routerLinkActiveOptions]="{ paths: 'exact', queryParams: 'exact', fragment: 'exact', matrixParams: 'ignored' }" class="nav-link" (click)="toggleMenu()">
          {{ langService.translate('nav.welcome') }}
        </a>
      </li>
      @for (item of navItems(); track item.label) {
        <li class="nav-item">
          <a [routerLink]="[item.path]" [fragment]="item.fragment" routerLinkActive="active" [routerLinkActiveOptions]="{ paths: 'exact', queryParams: 'exact', fragment: 'exact', matrixParams: 'ignored' }" class="nav-link" (click)="toggleMenu()">
            {{ item.label }}
          </a>
        </li>
      }
    </ul>
  </div>
</nav>